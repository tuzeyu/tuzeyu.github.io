(function(e){function t(t){for(var n,i,s=t[0],u=t[1],c=t[2],l=0,f=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);v&&v(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},o=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d0d43ac":"3f9e13d2"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=i(e);var c=new Error;o=function(t){u.onerror=u.onload=null,clearTimeout(l);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",c.name="ChunkLoadError",c.type=n,c.request=o,r[1](c)}a[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var v=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"2aaa":function(e,t,r){"use strict";var n=r("761b"),a=r.n(n);a.a},4805:function(e,t,r){"use strict";var n=r("8ce0"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e._v(" 这是首页 "),r("keep-alive",[r("router-view")],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello"},[r("h1",[e._v(e._s(e.msg))]),e._m(0),r("h3",[e._v("Installed CLI Plugins")]),e._m(1),r("h3",[e._v("Essential Links")]),e._m(2),r("h3",[e._v("Ecosystem")]),e._m(3)])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),r("br"),e._v(" check out the "),r("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),r("li",[r("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),r("li",[r("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),r("li",[r("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),r("li",[r("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),r("li",[r("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),r("li",[r("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],u={name:"HelloWorld",props:{msg:String}},c=u,l=(r("4805"),r("2877")),v=Object(l["a"])(c,i,s,!1,null,"b9167eee",null),f=v.exports,d=r("5b02"),p={name:"App",components:{HelloWorld:f,Faceid:d["a"]}},h=p,g=(r("034f"),Object(l["a"])(h,a,o,!1,null,null,null)),m=g.exports,b=(r("d3b7"),r("8c4f"));n["a"].use(b["a"]);var _=new b["a"]({mode:"history",routes:[{name:"face",path:"/face",component:function(){return r.e("chunk-2d0d43ac").then(r.bind(null,"5faf"))}}]});n["a"].config.productionTip=!1,new n["a"]({router:_,render:function(e){return e(m)}}).$mount("#app")},"5b02":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("div",{staticClass:"faceId"},[r("div",{staticClass:"face_Id"},[r("video",{ref:"video",attrs:{id:"inputVideo",autoplay:"",muted:"",playsinline:""},domProps:{muted:!0},on:{loadedmetadata:e.onPlay}}),r("canvas",{attrs:{id:"overlay"}}),r("canvas",{attrs:{id:"snap",width:"640",height:"480"}})])])])},a=[],o=(r("96cf"),r("1da1")),i={data:function(){return{forwardTimes:[],withBoxes:!0,scores:[],stream:void 0}},mounted:function(){this.run()},methods:{avg:function(e){for(var t=e.length,r=0,n=0;n<t;n++)r+=e[n];return r/t},onPlay:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,i,s,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=$("#inputVideo").get(0),!r.paused&&!r.ended&&isFaceDetectionModelLoaded()){t.next=3;break}return t.abrupt("return",setTimeout((function(){return e.onPlay()})));case 3:return n=getFaceDetectorOptions(),Date.now(),t.next=7,faceapi.detectSingleFace(r,n);case 7:a=t.sent,a&&(o=$("#overlay").get(0),i=faceapi.matchDimensions(o,r,!0),s=faceapi.resizeResults(a,i),e.withBoxes&&faceapi.draw.drawDetections(o,s)),a&&(e.scores.push(a.score),e.scores.length>20&&e.scores.shift()),console.log(e.avg(e.scores)+"====="+e.scores.length),a&&20==e.scores.length&&e.avg(e.scores)>.6&&a.score>.9?(u=document.getElementById("snap"),u.getContext("2d").drawImage(r,0,0,u.width,u.height),$(u).show(),e.turnOffCamera(),c=u.toDataURL("image/jpeg",1),e.$emit("capture",c)):setTimeout((function(){return e.onPlay()}),10);case 12:case"end":return t.stop()}}),t)})))()},turnOffCamera:function(){var e=$("#inputVideo").get(0);e.pause(),e.srcObject=void 0,console.log(this.stream.getTracks()),this.stream.getTracks()[0].stop()},testVideo:function(){var e=this.$refs.video,t={video:{width:640,height:480},audio:!1};if(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0!=navigator.mediaDevices&&void 0!=navigator.mediaDevices.getUserMedia){var r=this;console.log("hehehehee"),navigator.mediaDevices.getUserMedia(t).then((function(t){e.srcObject=t,r.stream=t}))}else void 0!=navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(t,(function(t){e.src=window.webkitURL.createObjectURL(t)}),(function(e){alert("kitErr: "+e.message)})):alert("defaultErr: "+err.message)},run:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,changeFaceDetector();case 2:return t.next=4,faceapi.loadFaceLandmarkModel("/model/");case 4:e.testVideo();case 5:case"end":return t.stop()}}),t)})))()}}},s=i,u=(r("2aaa"),r("2877")),c=Object(u["a"])(s,n,a,!1,null,"2121a4b3",null);t["a"]=c.exports},"761b":function(e,t,r){},"85ec":function(e,t,r){},"8ce0":function(e,t,r){}});
//# sourceMappingURL=app.e5f1e386.js.map